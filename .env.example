# ====================================================================
# JUSTOAI V2 - ENVIRONMENT CONFIGURATION TEMPLATE
# ====================================================================
# ⚠️ IMPORTANTE: Este é apenas um template para configuração.
# 1. Copie este arquivo para .env.local: cp .env.example .env.local
# 2. Preencha TODAS as variáveis com seus valores reais
# 3. NUNCA commite o arquivo .env.local ou qualquer arquivo com valores reais
# ====================================================================

# --------------------------------------------------------------------
# APPLICATION CONFIGURATION
# --------------------------------------------------------------------
# Ambiente de execução (development, production, test)
NODE_ENV=development

# URL pública da aplicação (full URL with protocol)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Domínio/Host da aplicação (sem protocolo, usado em validações)
# Desenvolvimento: localhost
# Produção: api.justoai.com
NEXT_PUBLIC_APP_DOMAIN=localhost

# --------------------------------------------------------------------
# REDIS CONFIGURATION (CRITICAL FOR PRODUCTION)
# --------------------------------------------------------------------
# ⚠️ IMPORTANT: Use REDIS_URL as the ONLY Redis configuration source
# The application uses REDIS_URL exclusively for connection. Other Redis
# variables (REDIS_HOST, REDIS_PORT, REDIS_PASSWORD) are IGNORED if
# REDIS_URL is defined. In production, if REDIS_URL is missing, the app crashes.
#
# Format for REDIS_URL:
#   - Upstash (recommended): rediss://default:[password]@[host]:6379
#   - Railway: redis://default:[password]@[host]:6379
#   - Local: redis://localhost:6379 (development only)
#
# ⚠️ DO NOT mix REDIS_URL with REDIS_HOST/REDIS_PORT/REDIS_PASSWORD
# If you have both defined, REDIS_URL takes precedence and others are ignored.
#
# For Railway Setup:
# 1. Go to Railway → Your Project → Variables
# 2. Add a new variable: REDIS_URL = [your Upstash connection string]
# 3. Apply to both 'web' and 'worker' services
# 4. Restart the services
REDIS_URL=redis://default:password@localhost:6379

# ========================================
# DEPLOYMENT & WORKER CONFIGURATION
# ========================================
# Set this to 'true' ONLY on Railway workers service
# This enables STRICT mode for Redis (fail immediately if unavailable)
# On Vercel web, leave this unset or false for GRACEFUL mode (fallback to MockRedis)
WORKER_ENABLED=false

# Set to 'true' to completely disable Redis (development/testing only)
# WARNING: Workers and distributed features will NOT work with REDIS_DISABLED=true
REDIS_DISABLED=false

# ========================================
# DEPRECATED - DO NOT USE THESE IF REDIS_URL IS SET
# ========================================
# These variables are for development fallback ONLY when REDIS_URL is not available.
# In production, these are completely ignored. Use REDIS_URL instead.
#
# Legacy Redis Host (development fallback only)
# REDIS_HOST=localhost
#
# Legacy Redis Port (development fallback only)
# REDIS_PORT=6379
#
# Legacy Redis Password (development fallback only)
# REDIS_PASSWORD=

# --------------------------------------------------------------------
# BULL QUEUE CONFIGURATION
# --------------------------------------------------------------------
# Token de acesso ao painel Bull Board (gere um token seguro)
# Sugestão: use `openssl rand -hex 32` para gerar
BULL_BOARD_ACCESS_TOKEN=your-secure-random-token-here

# Habilitar salvamento de estatísticas de sincronização
SAVE_SYNC_STATS=true

# --------------------------------------------------------------------
# WORKERS CONFIGURATION
# --------------------------------------------------------------------
# Ativar modo debug para workers (true/false)
DEBUG=false

# --------------------------------------------------------------------
# SUPABASE CONFIGURATION
# --------------------------------------------------------------------
# URL do projeto Supabase (obtenha em https://app.supabase.com)
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co

# Chave anônima (pública) do Supabase
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key-here

# Chave de service role do Supabase (⚠️ NUNCA exponha no frontend)
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key-here

# --------------------------------------------------------------------
# DATABASE CONFIGURATION
# --------------------------------------------------------------------
# ⚠️ CRITICAL: Database URL configuration with Supabase pgBouncer
#
# DATABASE_URL: Connection pooling URL (pgBouncer) - for queries
#   - Use this for normal application queries
#   - Supabase pooler connection string (includes ?pgbouncer=true)
#   - Format: postgresql://user:pass@aws-1-xxx.pooler.supabase.com:6543/postgres?pgbouncer=true
#
# DIRECT_URL: Direct PostgreSQL connection (no pooling) - for migrations
#   - REQUIRED by Prisma for migrations and schema introspection
#   - Direct connection to PostgreSQL (without pgBouncer)
#   - Format: postgresql://user:pass@db.xxx.supabase.co:5432/postgres
#   - Prevents "prepared statement does not exist" errors (error code 26000)
#
# Both URLs are REQUIRED in prisma/schema.prisma:
#   datasource db {
#     provider  = "postgresql"
#     url       = env("DATABASE_URL")        # For queries with pgBouncer
#     directUrl = env("DIRECT_URL")          # For migrations without pgBouncer
#   }
#
# NEVER use pgBouncer URL as DIRECT_URL - this causes prepared statement errors!
DATABASE_URL=postgresql://username:password@aws-1-xxx.pooler.supabase.com:6543/postgres?pgbouncer=true

DIRECT_URL=postgresql://username:password@db.xxx.supabase.co:5432/postgres

# --------------------------------------------------------------------
# AUTHENTICATION (NextAuth.js)
# --------------------------------------------------------------------
# URL da aplicação para NextAuth
NEXTAUTH_URL=http://localhost:3000

# Secret para assinar tokens JWT (gere com: openssl rand -base64 32)
NEXTAUTH_SECRET=your-nextauth-secret-here

# --------------------------------------------------------------------
# API KEYS - IA & SERVIÇOS EXTERNOS
# --------------------------------------------------------------------
# Google API Key (para Google Gemini AI)
# Obtenha em: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=your-google-api-key-here

# Anthropic API Key (para Claude AI)
# Obtenha em: https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# --------------------------------------------------------------------
# EMAIL CONFIGURATION
# --------------------------------------------------------------------
# Servidor SMTP (exemplo: smtp.resend.com, smtp.gmail.com)
SMTP_HOST=smtp.resend.com

# Porta SMTP (587 para TLS, 465 para SSL)
SMTP_PORT=465

# Usuário SMTP
SMTP_USER=resend

# Senha SMTP ou API key do serviço de email
SMTP_PASSWORD=your-smtp-password-or-api-key-here

# Email que aparecerá como remetente
FROM_EMAIL=contato@yourdomain.com

# --------------------------------------------------------------------
# JUDIT API CONFIGURATION
# --------------------------------------------------------------------
# Base URL da API JUDIT (monitoramento e onboarding de processos jurídicos)
# Produção: https://api.judit.ai/v1
JUDIT_API_BASE_URL=https://api.judit.ai/v1

# API Key da JUDIT (⚠️ OBRIGATÓRIO para produção)
# Obtenha em: https://dashboard.judit.ai ou contato com suporte
JUDIT_API_KEY=

# Nível de log (debug, info, warn, error)
# Use 'debug' em desenvolvimento para ver todas as requisições
LOG_LEVEL=debug

# --------------------------------------------------------------------
# FEATURES CONFIGURATION
# --------------------------------------------------------------------
# Habilitar dashboard clássico (true/false)
NEXT_PUBLIC_CLASSIC_DASHBOARD_ENABLED=true

# Habilitar funcionalidades Pro (true/false)
NEXT_PUBLIC_PRO_FEATURES_ENABLED=true

# Habilitar monitoramento de processos (true/false)
NEXT_PUBLIC_PROCESS_MONITORING_ENABLED=true

# --------------------------------------------------------------------
# MONITORING CONFIGURATION
# --------------------------------------------------------------------
# Intervalo de monitoramento de processos (em minutos)
PROCESS_MONITOR_INTERVAL_MINUTES=60

# Auto-iniciar monitoramento na aplicação (true/false)
PROCESS_MONITOR_AUTO_START=true

# Habilitar alertas por email (true/false)
ALERT_EMAIL_ENABLED=true

# Habilitar alertas via webhook (true/false)
ALERT_WEBHOOK_ENABLED=false

# --------------------------------------------------------------------
# UPLOAD/STORAGE CONFIGURATION
# --------------------------------------------------------------------
# Tamanho máximo de upload em bytes (10485760 = 10MB)
NEXT_PUBLIC_UPLOAD_MAX_SIZE=10485760

# --------------------------------------------------------------------
# FEATURE FLAGS
# --------------------------------------------------------------------
# Habilitar analytics/telemetria (true/false)
NEXT_PUBLIC_ENABLE_ANALYTICS=false

# Habilitar modo debug no frontend (true/false)
NEXT_PUBLIC_ENABLE_DEBUG=false

# --------------------------------------------------------------------
# SECURITY & CORS CONFIGURATION
# --------------------------------------------------------------------
# Origens permitidas para CORS (separadas por vírgula)
# Desenvolvimento: http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000
# Produção: https://justoai.com,https://www.justoai.com,https://app.justoai.com
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000

# Permitir credenciais em requisições CORS (true/false)
CORS_CREDENTIALS=true

# Habilitar headers de segurança adicionais (true/false)
SECURITY_HEADERS_ENABLED=true

# --------------------------------------------------------------------
# JUSTOAI SPECIFIC
# --------------------------------------------------------------------
# Versão do JustoAI
JUSTOAI_VERSION=v2

# --------------------------------------------------------------------
# API DOCUMENTATION (SWAGGER)
# --------------------------------------------------------------------
# Habilitar documentação Swagger (true/false)
NEXT_PUBLIC_SWAGGER_ENABLED=true

# URL base da API para documentação Swagger
# Desenvolvimento: http://localhost:3000
# Produção: https://api.justoai.com
NEXT_PUBLIC_API_URL=http://localhost:3000

# ====================================================================
# FIM DA CONFIGURAÇÃO
# ====================================================================
# Lembre-se:
# - Gere senhas e secrets fortes e únicos
# - Nunca compartilhe suas credenciais
# - Revogue imediatamente qualquer chave que tenha sido exposta
# - Use diferentes credenciais para desenvolvimento e produção
# ====================================================================
