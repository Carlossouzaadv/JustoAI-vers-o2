API de Transfer√™ncia de Arquivos
Esta API permite que clientes da JUDIT listem, consultem e fa√ßam download de arquivos dispon√≠veis para transfer√™ncia, al√©m de atualizarem o status de cada arquivo ap√≥s o consumo.

Base URL: https://lawsuits.prod.judit.io/
‚Äã
üîê Autentica√ß√£o
Todas as requisi√ß√µes devem conter um cabe√ßalho com a chave de API da empresa:

Copy
api-key: SUA_CHAVE_DE_API
‚ö†Ô∏è Um usu√°rio s√≥ pode acessar arquivos pertencentes ao tenant da sua pr√≥pria empresa.
‚Äã
üìÇ Listar arquivos dispon√≠veis
‚Äã
GET /transfer-file
Retorna uma lista paginada de arquivos dispon√≠veis para a empresa do usu√°rio autenticado.
‚Äã
Query Params suportados:
description: string (filtra por descri√ß√£o)
file_type: csv, json, parquet
name: string (filtra por nome do arquivo)
status: string ou array (ex: status=completed ou status=["completed","error"])
Datas: filtros de intervalo para os campos abaixo:
created_at, updated_at, completed_at, downloaded_at, error_at, failed_at, started_at
Exemplo: created_at_gte=2025-04-01T00:00:00.000Z
Pagina√ß√£o e ordena√ß√£o:
page: n√∫mero da p√°gina (default: 1)
page_size: tamanho da p√°gina (m√°x: 100, default: 10)
order_by: campo de ordena√ß√£o (default: created_at)
order: asc ou desc (default: desc)
‚Äã
Exemplo de chamada com curl:

Copy
curl -H "api-key: SUA_CHAVE_DE_API" \
  "https://lawsuits.prod.judit.io/transfer-file?page=1&page_size=20&status=[\"completed\"]"
‚Äã
Exemplo de resposta:

Copy
{
  "page": 1,
  "page_data": [
    {
      "transfer_file_id": "be4ed52a-a96b-4782-a181-b7ed75cb2f21",
      "description": "ARQUIVO INICIAL - CARGA 0",
      "file_type": "parquet",
      "name": "be4ed52a-a96b-4782-a181-b7ed75cb2f21-part-00001.parquet",
      "status": "downloaded",
      "created_at": "2025-04-22T11:50:00.000Z",
      "updated_at": "2025-04-22T09:21:06.343Z",
      "completed_at": "2025-04-22T11:51:00.000Z",
      "started_at": "2025-04-22T11:50:01.000Z",
      "downloaded_at": "2025-04-22T09:21:06.343Z",
      "error_at": "2025-04-22T09:20:31.460Z",
      "error_message": "teste de erro",
      "file_size": 0.038,
      "lawsuits_count": 19
    }
  ],
  "page_count": 1,
  "all_count": 1,
  "all_pages_count": 1
}
‚Äã
Explica√ß√£o dos campos de retorno:
page: n√∫mero da p√°gina atual
page_data: lista de arquivos retornados nesta p√°gina
page_count: quantidade de registros nesta p√°gina
all_count: total de arquivos encontrados no filtro
all_pages_count: total de p√°ginas dispon√≠veis
‚Äã
üì• Obter URL para download
‚Äã
GET /transfer-file/:transfer_file_id
Retorna os metadados do arquivo e uma URL pr√©-assinada da AWS para download (v√°lida por 5 minutos).
‚Äã
Exemplo de chamada com curl:

Copy
curl -H "api-key: SUA_CHAVE_DE_API" \
  "https://lawsuits.prod.judit.io/transfer-file/be4ed52a-a96b-4782-a181-b7ed75cb2f21"
‚Äã
Exemplo de resposta:

Copy
{
  "transfer_file_id": "be4ed52a-a96b-4782-a181-b7ed75cb2f21",
  "description": "ARQUIVO INICIAL - CARGA 0",
  "file_type": "parquet",
  "name": "be4ed52a-a96b-4782-a181-b7ed75cb2f21-part-00001.parquet",
  "status": "completed",
  "created_at": "2025-04-22T11:50:00.000Z",
  "updated_at": "2025-04-22T09:21:06.343Z",
  "completed_at": "2025-04-22T11:51:00.000Z",
  "started_at": "2025-04-22T11:50:01.000Z",
  "file_size": 0.038,
  "lawsuits_count": 19,
  "pre_signed_url": "https://s3.amazonaws.com/..."
}
‚Äã
üõ† Atualizar status de um arquivo
‚Äã
PATCH /transfer-file/:transfer_file_id
Permite marcar o arquivo como downloaded ou error ap√≥s a tentativa de uso.
‚Äã
Exemplo de chamada com curl:

Copy
curl -X PATCH -H "api-key: SUA_CHAVE_DE_API" \
     -H "Content-Type: application/json" \
     -d '{"status": "downloaded"}' \
     "https://lawsuits.prod.judit.io/transfer-file/be4ed52a-a96b-4782-a181-b7ed75cb2f21"
‚Äã
Corpo da requisi√ß√£o:
Para marcar como baixado:

Copy
{
  "status": "downloaded"
}
Para reportar erro:

Copy
{
  "status": "error",
  "error_message": "Descri√ß√£o do erro, stack trace ou contexto do problema."
}
‚Äã
Exemplo de resposta - status downloaded:

Copy
{
  "transfer_file_id": "be4ed52a-a96b-4782-a181-b7ed75cb2f21",
  "description": "ARQUIVO INICIAL - CARGA 0",
  "file_type": "parquet",
  "name": "be4ed52a-a96b-4782-a181-b7ed75cb2f21-part-00001.parquet",
  "status": "downloaded",
  "created_at": "2025-04-22T11:50:00.000Z",
  "updated_at": "2025-04-22T11:55:00.000Z",
  "completed_at": "2025-04-22T11:51:00.000Z",
  "started_at": "2025-04-22T11:50:01.000Z",
  "downloaded_at": "2025-04-22T11:55:00.000Z",
  "file_size": 0.038,
  "lawsuits_count": 19
}
‚Äã
Exemplo de resposta - status error:

Copy
{
  "transfer_file_id": "be4ed52a-a96b-4782-a181-b7ed75cb2f21",
  "description": "ARQUIVO INICIAL - CARGA 0",
  "file_type": "parquet",
  "name": "be4ed52a-a96b-4782-a181-b7ed75cb2f21-part-00001.parquet",
  "status": "error",
  "created_at": "2025-04-22T11:50:00.000Z",
  "updated_at": "2025-04-22T11:57:00.000Z",
  "completed_at": "2025-04-22T11:51:00.000Z",
  "started_at": "2025-04-22T11:50:01.000Z",
  "error_at": "2025-04-22T11:57:00.000Z",
  "error_message": "Descri√ß√£o do erro, stack trace ou contexto do problema.",
  "file_size": 0.038,
  "lawsuits_count": 19
}
‚Äã
üß† Observa√ß√µes
A URL retornada pela rota GET /transfer-file/:id expira em 5 minutos.
Arquivos com status error ser√£o analisados pela equipe t√©cnica da JUDIT.