# ====================================================================
# JUSTOAI V2 - RAILWAY BACKEND ENVIRONMENT VARIABLES
# ====================================================================
# Este arquivo contém TODAS as variáveis necessárias para o backend
# rodando no Railway (API + Workers + Cron Jobs)
# ====================================================================

# --------------------------------------------------------------------
# APPLICATION
# --------------------------------------------------------------------
NODE_ENV=production

# --------------------------------------------------------------------
# DATABASE (SUPABASE)
# --------------------------------------------------------------------
# Use connection pooling for Railway (port 6543)
DATABASE_URL=postgresql://postgres.[project]:[password]@[host]:6543/postgres?pgbouncer=true

# Direct connection for migrations (port 5432)
DIRECT_URL=postgresql://postgres.[project]:[password]@[host]:5432/postgres

# --------------------------------------------------------------------
# SUPABASE
# --------------------------------------------------------------------
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# --------------------------------------------------------------------
# REDIS (UPSTASH) - REQUIRED FOR WORKERS
# --------------------------------------------------------------------
# IMPORTANT: Use the full REDIS_URL format from Upstash Console
# Format: rediss://default:password@host:6379 (note the 'rediss' for TLS)
REDIS_URL=rediss://default:AVt9AAIncDI5Y2Q5YjE2NmZlOWE0N2MzYTM3ZWMyYzgyMGJiNDczNXAyMjM0MjE@accepted-cobra-23421.upstash.io:6379

# Alternative: Individual credentials (legacy - prefer REDIS_URL above)
# REDIS_HOST=accepted-cobra-23421.upstash.io
# REDIS_PORT=6379
# REDIS_PASSWORD=AVt9AAIncDI5Y2Q5YjE2NmZlOWE0N2MzYTM3ZWMyYzgyMGJiNDczNXAyMjM0MjE
# REDIS_USERNAME=default

# REST API credentials (optional - for Upstash REST API instead of native Redis)
UPSTASH_REDIS_REST_URL=https://accepted-cobra-23421.upstash.io
UPSTASH_REDIS_REST_TOKEN=AVt9AAIncDI5Y2Q5YjE2NmZlOWE0N2MzYTM3ZWMyYzgyMGJiNDczNXAyMjM0MjE

# CRITICAL: Set to false to enable Redis (required for workers)
# Set to true ONLY for API-only deployment without workers
REDIS_DISABLED=false

# --------------------------------------------------------------------
# AUTHENTICATION (NextAuth)
# --------------------------------------------------------------------
NEXTAUTH_URL=https://your-railway-backend.up.railway.app
NEXTAUTH_SECRET=your-super-secret-nextauth-secret-min-32-chars

# --------------------------------------------------------------------
# API KEYS
# --------------------------------------------------------------------
GOOGLE_API_KEY=AIzaSy...your-google-api-key
JUDIT_API_KEY=your-judit-api-key  # When received
ANTHROPIC_API_KEY=sk-ant-...  # Optional

# --------------------------------------------------------------------
# EMAIL (RESEND)
# --------------------------------------------------------------------
SMTP_HOST=smtp.resend.com
SMTP_PORT=465
SMTP_USER=resend
SMTP_PASSWORD=re_...your-resend-api-key
FROM_EMAIL=noreply@justoai.com.br

# --------------------------------------------------------------------
# JUDIT API
# --------------------------------------------------------------------
JUDIT_API_URL=https://api.judit.io
JUDIT_REQUESTS_URL=https://requests.prod.judit.io
JUDIT_TRACKING_URL=https://tracking.prod.judit.io

# --------------------------------------------------------------------
# WORKERS & QUEUE
# --------------------------------------------------------------------
BULL_BOARD_ACCESS_TOKEN=your-random-token-minimum-32-characters
SAVE_SYNC_STATS=true

# --------------------------------------------------------------------
# MONITORING
# --------------------------------------------------------------------
LOG_LEVEL=info

# Sentry (optional but recommended)
SENTRY_DSN=https://xxxxx@o123456.ingest.sentry.io/123456
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=justoai-v2@1.0.0

# --------------------------------------------------------------------
# ALERTS
# --------------------------------------------------------------------
ALERTS_EMAIL_ENABLED=true
ALERTS_EMAIL_FROM=alerts@justoai.com.br
ALERTS_EMAIL_TO=ops@justoai.com,admin@justoai.com

ALERTS_SLACK_ENABLED=false
ALERTS_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/T00/B00/xxxx

ALERTS_WEBHOOK_ENABLED=false
ALERTS_WEBHOOK_URL=https://your-monitoring-service.com/api/alerts

# --------------------------------------------------------------------
# SECURITY & CORS
# --------------------------------------------------------------------
# IMPORTANT: Add your Vercel URLs here
ALLOWED_ORIGINS=https://justoai-v2.vercel.app,https://v2.justoai.com.br
CORS_CREDENTIALS=true
SECURITY_HEADERS_ENABLED=true

# --------------------------------------------------------------------
# PROCESS MONITORING
# --------------------------------------------------------------------
PROCESS_MONITOR_INTERVAL_MINUTES=60
PROCESS_MONITOR_AUTO_START=true
ALERT_EMAIL_ENABLED=true
ALERT_WEBHOOK_ENABLED=false

# --------------------------------------------------------------------
# FEATURE FLAGS
# --------------------------------------------------------------------
NEXT_PUBLIC_CLASSIC_DASHBOARD_ENABLED=true
NEXT_PUBLIC_PRO_FEATURES_ENABLED=true
NEXT_PUBLIC_PROCESS_MONITORING_ENABLED=true
NEXT_PUBLIC_ENABLE_ANALYTICS=true
NEXT_PUBLIC_ENABLE_DEBUG=false
NEXT_PUBLIC_SWAGGER_ENABLED=false
NEXT_PUBLIC_UPLOAD_MAX_SIZE=10485760

# --------------------------------------------------------------------
# WORKERS CONFIGURATION
# --------------------------------------------------------------------
DEBUG=false
WORKER_CONCURRENCY=5
JOB_TIMEOUT=300000

# --------------------------------------------------------------------
# VERSION
# --------------------------------------------------------------------
JUSTOAI_VERSION=v2.1.0

# ====================================================================
# CHECKLIST RAILWAY
# ====================================================================
# ✅ NODE_ENV=production
# ✅ DATABASE_URL (with pooling - port 6543)
# ✅ DIRECT_URL (without pooling - port 5432)
# ✅ All Supabase variables
# ✅ Redis credentials (Upstash)
# ✅ NEXTAUTH_SECRET (min 32 chars)
# ✅ NEXTAUTH_URL (your Railway URL)
# ✅ API keys (Google, JUDIT when received)
# ✅ Email/SMTP credentials (Resend)
# ✅ ALLOWED_ORIGINS (include Vercel URLs)
# ✅ BULL_BOARD_ACCESS_TOKEN
# ✅ Sentry DSN (optional)
# ====================================================================
